---
title       : Data analysis in R
subtitle    : A gentle introduction
author      : Joseph V. Casillas, PhD
job         : 
github      : {user: jvcasill, repo: introR}
framework   : io2012
highlighter : highlight.js
hitheme     : tomorrow 
widgets     : [mathjax, quiz, bootstrap]
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
logo        : ru.png
biglogo     : ru.png
assets      : {assets: ./assets}
---

## Before we start...

### RU ready?

- Download [R](https://cran.r-project.org)
- Download [RStudio](https://www.rstudio.com/products/rstudio/download/)
- Download [scripts](http://www.jvcasillas.com/introR/assets/scripts/introR.R)
- Follow the presentation www.jvcasillas.com/introR/

### Let's start

>- Open RStudio
- Open the file ```introR.R``` in RStudio (File > Open file)
- Highlight lines 1-19
- Type ```command``` + ```enter```

---

```
1  ###############################################################################
2  # Intro to R                                                                  #
3  # Joseph V. Casillas, PhD                                                     #
4  # 10/02/2016                                                                  #
5  ###############################################################################
6
7  # clean working directory
8  rm(list = ls(all = TRUE))
9
10 # Install required packages
11 packages <- c("ggplot2", "dplyr", "tidyr", "lme4", "devtools", "lingStuff")
12 if (length(setdiff(packages, rownames(installed.packages()))) > 0) {
13    install.packages(setdiff(packages, rownames(installed.packages())))  
14 }
15
16 # Load packages
17 library(tidyr); library(dplyr); library(ggplot2); library(lme4); 
18 library(devtools); library(lingStuff)
19
```

---

## Outline

<div style="float:right">
  <img width='300' src="./assets/img/objetivos2.jpg">
</div>

- What is R?
- Why should you use it?
- Object oriented programming
- Data structures
- Manipulating dataframes
- Data visualization
- Data analyses
- Reproducible research
- Extras

--- .segue bg:grey

# What is R?

---

## What is R?

<div style="float:right">
  <img width='100' src="./assets/img/fill.png">
  <img width='300' src="./assets/img/confundido.png">
</div>

- R is a language and environment for statistical computing and graphics
- GNU project

---

## R environment 

<div align="center">
  <img src="./assets/img/rstudio1.png">
</div>

--- .segue bg:grey

# Object oriented programming

---

## Object oriented programming

> [...] language model organized around objects rather than "actions" and data rather 
> than logic.

- The console
- R as a calculator
- Scripting language and objects

---

## The console

<div>
  <img width='100%' src="./assets/img/console1.png">
</div>

<p></p>

> - Gross
- Unintuitive
- Unproductive

--- &twocol2

## R as a calculator

<div style="float:right">
  <img width='350' src="./assets/img/programmer.jpeg">
</div>

*** {name: left}

- You can do simple arithmetic using the console

```{r, 'calculator', align='left'}
2 + 2
4^2
(12 * 15) / 2
```

<p></p>

> - Like using a ferrari to get the mail

---

## Scripting language

### R is a scripting language

<div>
  <img width='100%' src="./assets/img/rstudio2.png">
</div>

</br>

- Write code in .R file
- Send code to the console by highlighting in and typing **cmd** + **enter**
- Open the script 'introR.R' (File > Open file) and send some code to the console!

---

## Scripting language

### Comment your code

- You can include comments in your code by placing # at the beginning
- This is important so that you remember what you did and why!

```{r, 'comments'}
# This is a comment
2 + 2
```

---

## Scripting language

### OOP uses objects 

- Objects are variables saved into your computers memory
- You assign objects to variables using ```<-```

```{r, 'objects'}
x <- 2
print(x)
```

- You can then refer to and manipulate variables

```{r, 'objects2'}
x + 4
```

---

## Scripting language

### Functions

- The way we get things done in R is via functions
- A function in a command that performs an operation
	- ```sum()```
	- ```mean()```
	- ```lm()```
- Functions take arguements
	- ```sum(x)``` = calculate the sum of the values in the vector 'x'
	- ```mean(x)``` = calculate the mean of the values in the vector 'x'
	- ```lm(y ~ x)``` = fit a linear model ('y' as a function of 'x')
- ```R``` has many, many functions
- If you can't find one that does what you want, you can create it and share it in an R package (i.e. ```lingStuff```)

--- .segue bg:grey

# Data structures

---

## Data structures

### R uses several different types of data structures  
We will focus on three

1. Vectors
2. Matrices
3. Dataframes

---

## Vectors

- A vector is a sequence of data elements of the same basic type
- They commonly include chars or numbers

```{r, 'vectors1'}
x <- c(1, 2, 3)
y <- c(4, 5, 6)
z <- c('a', 'b', 'c')
print(x); print(y); print(z)
```

--- &twocol3

## Vectors

*** {name: left}

### We can perform operations on vectors

```{r, 'vectors2'}
x <- c(1, 2, 3)
y <- c(4, 5, 6)
x + 1
x + y
```

*** {name: right}

### ... but they have to be the same type of vector

```{r, 'vectors3'}
y + z
```

--- &twocol2

## Matrices

<div style="float:right">
  <img width='350' src="./assets/img/matrix.jpg"> </br>
  <img width='250' src="./assets/img/matrix2.png">
</div>

*** {name: left}

- A matrix is a two dimensional vector

```{r, 'matrix1'}
matrix(1:10, nrow = 5, ncol = 2)
```
</br>

- For most purposes, a matrix is not very convenient

---

## Dataframes

- A dataframe is a matrix with column names

```{r, 'dataframe1'}
testDF <- data.frame(x, y, z)
print(testDF)
```

- R comes with some dataframes installed
- Try using the command ```head()``` with the following dataframes
	- ```head(mtcars)```
	- ```head(USArrests)```

---

```{r, 'dataframe2'}
head(mtcars); head(USArrests)
```

--- .segue bg:grey

# Manipulating dataframes

---

## Manipulating dataframes

- This is probably the hardest thing you have to learn to do in R (when you first start)!
- We can refer to rows and columns inside a dataframe using brackets ```[]```
- Let's create a data frame in order to practice

```{r, 'dataframe3'}
x <- seq(1:30)
g <- gl(n = 2, k = 15, length = 30, labels = c('females', 'males'))
y.iq <- rnorm(n = 30, mean = 80, sd = 18)
y.wt <- rnorm(n = 30, mean = 170, sd = 50)
y.ht <- rnorm(n = 30, mean = 60, sd = 15)

df <- data.frame(subj = x, 
                 group = g, 
                 iq = y.iq, 
                 wt = sort(y.wt), 
                 ht = y.ht)
```

---

## Manipulating dataframes

- Let's look at 'df' using the ```head()``` function

```{r, 'checkdf'}
head(df)
```

---














<!--
----

# Basic overview

These are some of the topics covered in this introduction. Here I provide a 
peak at some of the areas discussed.

## What is R?

- R is a language and environment for statistical computing and graphics
- GNU project

## Why should you use it?

- Robust statistical and graphical techniques
- Extensible
- Platform independent
- Free

## Object oriented programming

- the console
  - gross
- R as a calculator
  - using a ferrari to get the mail
- scripting languages
  - comments
  - objects: assigning variables

## Data structures

- vectors
- matrices
- dataframes

## Manipulating dataframes

- subsetting
- tidy data
- creating new variables

## Data visualization

- grammar of graphics
- aesthetics
- geoms

## Data analyses

- Linear models
- Hierarchical models

## Reproducible research

- Markdown
- RMarkdown
- RMarkdown ecosystem

## Extras

- Webpages
- Shiny
- Presentations


-->


---

## Thank you

- Slides on [github](https://github.com/jvcasill/introR)
- Scripts available [here](http://www.jvcasillas.com/introR/assets/scripts/introR.R)

joseph.casillas@rutgers.edu
